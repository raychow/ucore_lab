# Lab 3

## 练习 1: 给未被映射的地址映射上物理页

* 实现过程

    1. 寻找引起缺页异常的线性地址对应的页表项；
    2. 如果页表项无内容，表示此线性地址未映射，则为此地址进行映射。

* 请描述页目录项(Page Director Entry)和页表(Page Table Entry)中组成部分对 ucore 实现页替换算法的潜在用处。

    * 页目录项的 PTE_P 表示了此页目录项是否存在，如果不存在则需要创建；
    * 页表项的 PTE_P 有如下几种用途：
        1. 如果设置了 PTE_P，表示页面存在内存中；
        2. 如果未设置 PTE_P，且高 24 位为 0，表示页面尚未创建，需要创建页面；
        3. 如果未设置 PTE_P，且高 24 位不为 0，表示页面已被换出到页表项高 24 位地址的硬盘扇区。

* 如果 ucore 的缺页服务例程在执行过程中访问内存，出现了页访问异常，请问硬件要做哪些事情？

    1. CPU 在当前内核栈保存被打断的程序现场即依次压入当前被打断程序使用的 EFLAGS, CS, EIP, errorCode；
    2. 由于页访问异常的中断号是 0xE，CPU 把异常中断号 0xE 对应的中断服务例程的地址（vectors.S 中的
标号 vector14 处）加载到 CS 和 EIP 寄存器中，开始执行中断服务例程。
