# Lab 1

## 练习 1: 理解通过 make 生成执行文件的过程

1. 操作系统镜像文件 ucore.img 是如何一步一步生成的？
> 1. gcc 编译并链接 kernel;
> 2. gcc 编译并链接 bootloader;
> 3. dd 创建了一个 5,120,000 字节的 ucore.img，并将 bootloader 与 kernel 的内容复制进去。

2. 一个被系统认为是符合规范的硬盘主引导扇区的特征是什么？
> 从 tools/sign.c 的签名方式来看，主引导扇区的最后两个字节应该是 0x55AA。

## 练习 2: 使用 qemu 执行并调试 lab1 中的软件

1. 使用 make lab1-mon 进入调试，观察到 gdb 在 0x7c00 处的断点停了下来；
2. 为了更好地观察汇编代码，键入 `layout asm` 进入汇编视图；
3. 使用 `ni` 或者 `si` 单步运行汇编代码；
4. 由于 gdb 中显示的是反汇编得到的代码，所以与 bootasm.S 中有所不同。例如，`jnz seta20.1` 反汇编为 `jne 0x7c0a`，`jnz` 被替换为同义指令 `jne`，`seta20.1` 被替换为真实地址。
5. 为了在设置段表的地方停止，键入 `b *0x7c1e`，并按 `c` 继续执行，gdb 将在程序运行到 0x7c1e 时中断。
